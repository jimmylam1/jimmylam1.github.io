<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/0e4fe491bf84089c-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/627622453ef56b0d-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/7777133e901cd5ed-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/8e992d4bd80b0720-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/916d3686010a8de2-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/934c4b7cb736f2a3-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/c04551857776278f-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/d869208648ca5469-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/8655c068fe95e315.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/d76a7673164391a8.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-d8e6908e0081a28f.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-59f432d2e5612c37.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-ad0c89c8f4328197.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-439ca1198ad71a79.js" as="script"/><title>Jimmy Lam</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_20951f __variable_8a1c6c __variable_a17896 __variable_aba8eb"><div class="Navbar_nav__uORRK"><div class="Navbar_menuContainer__FjmLm"><div><h1 class="Navbar_openBtn__snhBv">☰</h1></div><div class="Navbar_jimmyWrapper__zhEoi"><a class="Navbar_link__ambd4 Navbar_jimmy__u2GrF" href="/">&lt;Jimmy/&gt;</a></div></div><ul><li><a class="Navbar_link__ambd4" href="/projects/">Projects</a></li><li><a class="Navbar_link__ambd4" href="/Resume.pdf">Resume</a></li><li><a class="Navbar_link__ambd4" href="https://github.com/jimmylam1">GitHub</a></li><li><a class="Navbar_link__ambd4" href="https://www.linkedin.com/in/jimmylamdev">LinkedIn</a></li></ul></div><div class="Navbar_mobileMenuWrapper__WOe1m false"><div class="Navbar_mobileMenu__bxBLz false"><a class="Navbar_link__ambd4 Navbar_jimmy__u2GrF" href="/">&lt;Jimmy/&gt;</a><div class="Navbar_closeBtn__hnI9u">×</div><ul><li><a class="Navbar_link__ambd4" href="/projects/">Projects</a></li><li><a class="Navbar_link__ambd4" href="/Resume.pdf">Resume</a></li><li><a class="Navbar_link__ambd4" href="https://github.com/jimmylam1">GitHub</a></li><li><a class="Navbar_link__ambd4" href="https://www.linkedin.com/in/jimmylamdev">LinkedIn</a></li></ul></div><div class="Navbar_closeMobileMenuArea__szHmP false"></div></div><div><div class="projectPage_main__fC8GM"><div class="projectPage_container__sWJwi"><div class="Project_textContainer__l_pPQ"><h1>Mario Kart Tour Discord Bots</h1><h2 class="Project_categoryText__mreSC">Application</h2><div class="Project_tagContainerCentered__YVyTj"><div class="Tag_tag__UJ0xo">JavaScript</div><div class="Tag_tag__UJ0xo">Node.js</div><div class="Tag_tag__UJ0xo">MongoDB</div><div class="Tag_tag__UJ0xo">Google Sheets API</div><div class="Tag_tag__UJ0xo">Web Scraping</div><div class="Tag_tag__UJ0xo">Child Processes</div><div class="Tag_tag__UJ0xo">OCR</div></div></div><img alt="Mario Kart Tour Discord Bots" loading="lazy" width="300" height="300" decoding="async" data-nimg="1" class="Project_mainImage__o_g4y" style="color:transparent" src="/images/projects/bots.png"/><div class="Project_textContainer__l_pPQ"><div class="Project_pageLinkContainer__cN1Lr"><a class="LinkButton_container__4_7Qp" href="https://mktbots.com" target="_blank"><div class="LinkButton_website___Rubh LinkButton_icon__aEYQ1"></div>View Website</a></div></div><div class="projectPage_content__NrO4R"><h2>About</h2><p>For some background, Mario Kart Tour is a mobile game available on Android and iOS devices, and Discord is a messaging platform where conversations take place in communities called &quot;servers&quot;. Unlike other messaging apps, Discord allows developers to create &quot;bots&quot; to enhance the platform. Whenever someone uses a bot command, the bot will reply with something useful.<br/><br/>I&#x27;ve created a separate website, <a href="https://mktbots.com" target="_blank">mktbots.com</a>, that goes in depth for each bot. There, you can see see a list of all their features and commands.<br/><br/>Collectively, my Discord bots have been added to over 1,000 Discord servers, and they are used by 300+ unique users every day.</p><h2>How are they built?</h2><p>All my bots are built using JavaScript with Node.js, and the Discord.js library is what I use to connect with Discord. In addition, MongoDB is the database used across all bots.<br/><br/>The bots were originally hosted on Heroku, but I have since transferred them to a  DigitalOcean droplet due to Heroku&#x27;s policy changes.</p><h2>Common features across all bots</h2><p>All my Discord bots use image generation extensively. Since Discord bots can only display text in a few specific ways, images allow for full control over how responses should look. I use Canvas for all the image related needs.<br/><br/>Command responsiveness is a top priority. When someone uses a command, I try to minimize the time it takes for them to receive a response. Whenever necessary, data will be cached like when querying a database or fetching data.<br/><br/>Web scraping is an integral tool for all my bots. By web scraping <a href="https://www.mariowiki.com/Mario_Kart_Tour" target="_blank">Mario Wiki</a>, the bots are able to fetch all the required assets without my assistance.<br/><br/>Connecting to Google Sheets is an essential backend feature, and the Google Sheets API is used throughout to either fetch data or edit a spreadsheet.</p><h2>Challenges faced</h2><h3>Ice Mario</h3><p>A challenge I faced was figuring out how to display hundreds of team logos at once. The best method was to generate images containing them, but it is a CPU heavy task that takes a very long time to complete. The solution was to fork a child process, and that allows the child process to fetch and generate images without affecting the parent process.<br/><br/>Another challenge focuses on player lounge stats and how the data is fetched. For the first 8 seasons of MKT Lounge, player stats were stored in a Google spreadsheet. Since there was a lot of data, fetching a sheet can take a very long time, often over 30 seconds, and this would be terrible to fetch on every command invocation. The solution is to cache all the fetched data, and this allows the bot to have immediate access to them.</p><h3>ACR Bot</h3><p>A challenge I faced was figuring out a way to generate an image that requires over 40 separate images. While the command <code>/trackinfo</code> can be quick when the images are cached, it can take 30 seconds or more to generate if the bot were to restart. I quickly realized this approach of generating images was not a good user experience. My solution was to generate all 800+ images, save them, then use them whenever someone uses the command. While it took some time to generate them up front, this significantly improves speed since the bot is now able to respond almost instantaneously.<br/><br/>Another challenge relates to the newest command <code>/overlap</code>. Unlike <code>/trackinfo</code> where all the images can be pre-generated, the overlap command cannot do that due to the large number of possible input combinations. My solution was to fork a child process to generate the images, and this prevents the main process from running into performance issues.</p><h3>MKT Time Trial Bot</h3><p>A challenge I faced was figuring out how to use Optical Character Recognition (OCR) to read a screenshot and extract text from it. I initially tried using Tesseract, an OCR engine, but it produced inconsistent results. Instead of attempting to train it, I decided to experiment and create my own OCR reader from analyzing pixel data. The video below is a conceptual overview on how it was done:</p><div class="projectPage_videoWrapper__mmXgF"><iframe class="projectPage_video__UMhQz" width="560" height="315" src="https://www.youtube.com/embed/Z9gY5Hl13y0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe></div></div></div></div></div><script src="/_next/static/chunks/webpack-d8e6908e0081a28f.js" async=""></script><script src="/_next/static/chunks/fd9d1056-59f432d2e5612c37.js" async=""></script><script src="/_next/static/chunks/596-ad0c89c8f4328197.js" async=""></script><script src="/_next/static/chunks/main-app-439ca1198ad71a79.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/0e4fe491bf84089c-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/627622453ef56b0d-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/media/7777133e901cd5ed-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n5:HL[\"/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/media/8e992d4bd80b0720-s.p.woff2\",{\"as\":\"font\","])</script><script>self.__next_f.push([1,"\"type\":\"font/woff2\"}]\n7:HL[\"/_next/static/media/916d3686010a8de2-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n8:HL[\"/_next/static/media/934c4b7cb736f2a3-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n9:HL[\"/_next/static/media/c04551857776278f-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\na:HL[\"/_next/static/media/d869208648ca5469-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\nb:HL[\"/_next/static/css/8655c068fe95e315.css\",{\"as\":\"style\"}]\n0:\"$Lc\"\n"])</script><script>self.__next_f.push([1,"d:HL[\"/_next/static/css/d76a7673164391a8.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-d8e6908e0081a28f.js\",\"971:static/chunks/fd9d1056-59f432d2e5612c37.js\",\"596:static/chunks/596-ad0c89c8f4328197.js\"],\"name\":\"default\",\"async\":false}\n10:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-d8e6908e0081a28f.js\",\"971:static/chunks/fd9d1056-59f432d2e5612c37.js\",\"596:static/chunks/596-ad0c89c8f4328197.js\"],\"name\":\"GlobalError\",\"async\":false}\n11:I{\"id\":1125,\"chunks\":[\"176:static/chunks/176-ecb197273d574ca6.js\",\"185:static/chunks/app/layout-a0edca16b3c7"])</script><script>self.__next_f.push([1,"7a69.js\"],\"name\":\"\",\"async\":false}\n12:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-d8e6908e0081a28f.js\",\"971:static/chunks/fd9d1056-59f432d2e5612c37.js\",\"596:static/chunks/596-ad0c89c8f4328197.js\"],\"name\":\"default\",\"async\":false}\n13:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-d8e6908e0081a28f.js\",\"971:static/chunks/fd9d1056-59f432d2e5612c37.js\",\"596:static/chunks/596-ad0c89c8f4328197.js\"],\"name\":\"default\",\"async\":false}\n14:I{\"id\":9476,\"chunks\":[\"176:static/chunks/176-ecb197273d574ca6.js\",\"691:stati"])</script><script>self.__next_f.push([1,"c/chunks/691-ef0d2ffce9046185.js\",\"591:static/chunks/app/projects/discordbots/page-e68a3c9bb8edf8ca.js\"],\"name\":\"ProjectPage\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"c:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8655c068fe95e315.css\",\"precedence\":\"next\"}]],[\"$\",\"$Le\",null,{\"buildId\":\"Ywz0pyD5ysF1KrKJpd3fi\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/projects/discordbots/\",\"initialTree\":[\"\",{\"children\":[\"projects\",{\"children\":[\"discordbots\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$Lf\",\"globalErrorComponent\":\"$10\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_20951f __variable_8a1c6c __variable_a17896 __variable_aba8eb\",\"children\":[[\"$\",\"$L11\",null,{}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$L12\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L13\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L12\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L13\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L12\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",\"discordbots\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L13\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"div\",null,{\"className\":\"projectPage_main__fC8GM\",\"children\":[\"$\",\"div\",null,{\"className\":\"projectPage_container__sWJwi\",\"children\":[[\"$\",\"$L14\",null,{\"id\":0,\"title\":\"Mario Kart Tour Discord Bots\",\"image\":\"/images/projects/bots.png\",\"category\":\"Application\",\"tags\":[\"JavaScript\",\"Node.js\",\"MongoDB\",\"Google Sheets API\",\"Web Scraping\",\"Child Processes\",\"OCR\"],\"bulletPoints\":[\"Centered around the game Mario Kart Tour\",\"Added to 1000+ Discord servers\",\"Used by 300+ unique users every day\",\"Fast response time is a top priority\",\"Extensive use of image generation for the best user experience\"],\"pageUrl\":\"/projects/discordbots\",\"links\":{\"demo\":null,\"github\":null,\"website\":\"https://mktbots.com\",\"video\":null},\"isHighlight\":true}],[\"$\",\"div\",null,{\"className\":\"projectPage_content__NrO4R\",\"children\":[[\"$\",\"h2\",null,{\"children\":\"About\"}],[\"$\",\"p\",null,{\"children\":[\"For some background, Mario Kart Tour is a mobile game available on Android and iOS devices, and Discord is a messaging platform where conversations take place in communities called \\\"servers\\\". Unlike other messaging apps, Discord allows developers to create \\\"bots\\\" to enhance the platform. Whenever someone uses a bot command, the bot will reply with something useful.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"I've created a separate website, \",[\"$\",\"a\",null,{\"href\":\"https://mktbots.com\",\"target\":\"_blank\",\"children\":\"mktbots.com\"}],\", that goes in depth for each bot. There, you can see see a list of all their features and commands.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Collectively, my Discord bots have been added to over 1,000 Discord servers, and they are used by 300+ unique users every day.\"]}],[\"$\",\"h2\",null,{\"children\":\"How are they built?\"}],[\"$\",\"p\",null,{\"children\":[\"All my bots are built using JavaScript with Node.js, and the Discord.js library is what I use to connect with Discord. In addition, MongoDB is the database used across all bots.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"The bots were originally hosted on Heroku, but I have since transferred them to a  DigitalOcean droplet due to Heroku's policy changes.\"]}],[\"$\",\"h2\",null,{\"children\":\"Common features across all bots\"}],[\"$\",\"p\",null,{\"children\":[\"All my Discord bots use image generation extensively. Since Discord bots can only display text in a few specific ways, images allow for full control over how responses should look. I use Canvas for all the image related needs.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Command responsiveness is a top priority. When someone uses a command, I try to minimize the time it takes for them to receive a response. Whenever necessary, data will be cached like when querying a database or fetching data.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Web scraping is an integral tool for all my bots. By web scraping \",[\"$\",\"a\",null,{\"href\":\"https://www.mariowiki.com/Mario_Kart_Tour\",\"target\":\"_blank\",\"children\":\"Mario Wiki\"}],\", the bots are able to fetch all the required assets without my assistance.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Connecting to Google Sheets is an essential backend feature, and the Google Sheets API is used throughout to either fetch data or edit a spreadsheet.\"]}],[\"$\",\"h2\",null,{\"children\":\"Challenges faced\"}],[\"$\",\"h3\",null,{\"children\":\"Ice Mario\"}],[\"$\",\"p\",null,{\"children\":[\"A challenge I faced was figuring out how to display hundreds of team logos at once. The best method was to generate images containing them, but it is a CPU heavy task that takes a very long time to complete. The solution was to fork a child process, and that allows the child process to fetch and generate images without affecting the parent process.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Another challenge focuses on player lounge stats and how the data is fetched. For the first 8 seasons of MKT Lounge, player stats were stored in a Google spreadsheet. Since there was a lot of data, fetching a sheet can take a very long time, often over 30 seconds, and this would be terrible to fetch on every command invocation. The solution is to cache all the fetched data, and this allows the bot to have immediate access to them.\"]}],[\"$\",\"h3\",null,{\"children\":\"ACR Bot\"}],[\"$\",\"p\",null,{\"children\":[\"A challenge I faced was figuring out a way to generate an image that requires over 40 separate images. While the command \",[\"$\",\"code\",null,{\"children\":\"/trackinfo\"}],\" can be quick when the images are cached, it can take 30 seconds or more to generate if the bot were to restart. I quickly realized this approach of generating images was not a good user experience. My solution was to generate all 800+ images, save them, then use them whenever someone uses the command. While it took some time to generate them up front, this significantly improves speed since the bot is now able to respond almost instantaneously.\",[\"$\",\"br\",null,{}],[\"$\",\"br\",null,{}],\"Another challenge relates to the newest command \",[\"$\",\"code\",null,{\"children\":\"/overlap\"}],\". Unlike \",[\"$\",\"code\",null,{\"children\":\"/trackinfo\"}],\" where all the images can be pre-generated, the overlap command cannot do that due to the large number of possible input combinations. My solution was to fork a child process to generate the images, and this prevents the main process from running into performance issues.\"]}],[\"$\",\"h3\",null,{\"children\":\"MKT Time Trial Bot\"}],[\"$\",\"p\",null,{\"children\":\"A challenge I faced was figuring out how to use Optical Character Recognition (OCR) to read a screenshot and extract text from it. I initially tried using Tesseract, an OCR engine, but it produced inconsistent results. Instead of attempting to train it, I decided to experiment and create my own OCR reader from analyzing pixel data. The video below is a conceptual overview on how it was done:\"}],[\"$\",\"div\",null,{\"className\":\"projectPage_videoWrapper__mmXgF\",\"children\":[\"$\",\"iframe\",null,{\"className\":\"projectPage_video__UMhQz\",\"width\":\"560\",\"height\":\"315\",\"src\":\"https://www.youtube.com/embed/Z9gY5Hl13y0\",\"title\":\"YouTube video player\",\"frameborder\":\"0\",\"allow\":\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",\"allowfullscreen\":true}]}]]}]]}]}],null],\"segment\":\"__PAGE__\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d76a7673164391a8.css\",\"precedence\":\"next\"}]]}],\"segment\":\"discordbots\"},\"styles\":[]}],\"segment\":\"projects\"},\"styles\":[]}]}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Jimmy Lam\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n"])</script></body></html>